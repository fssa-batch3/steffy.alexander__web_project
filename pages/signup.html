<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../assests/css/signup.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>

<body>


    <div class="main">
        <div class="signup">
            <h2>Signup</h2>

            <div class="icons">
                <i id="iconlog" class="fa-brands fa-facebook"></i>
                <i id="iconlog" class="fa-brands fa-twitter"></i>
                <i id="iconlog" class="fa-brands fa-google-plus-g"></i>
            </div>
        </div>
        <form>

            <label><i id="loglog" class="fa-solid fa-child-dress"></i>
                <input type="text" placeholder="First Name..." pattern="[A-Za-z]{1,24}" id="fname"
                    title="Firstletter must in CAPS" required></label><br>
            <label><i id="loglog" class="fa-solid fa-child-dress"></i>
                <input type="text" placeholder="Last Name..." id="lname"></label><br>
            <label><i id="loglog" class="fa-solid fa-envelope"></i>
                <input type="email" placeholder="Email..." id="email" required></label><br>
            <label><i id="loglog" class="fa-solid fa-lock"></i>
                <input type="password" placeholder="Password..." id="password"  title="Enter a uppercase, a lowercase, a number/special character" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*_=+-]).{8,24}$" 
               
                    required></label><br> 
            <label><i id="loglog" class="fa-solid fa-lock"></i>
                <input type="password" placeholder="Confirm Password..." id="confirmpass" required></label><br><br><br>

            <button type="submit">GET STARTED</button>
        </form>
        

    </div>


  
    <script>
        let form = document.querySelector("form");
        form.addEventListener("submit", function(event){
            event.preventDefault();
            submit();

            console.log("Form has been submitted")
        })

        function submit () {
            const fname       = document.getElementById("fname").value
            const lname       = document.getElementById("lname").value
            const email       = document.getElementById("email").value
            const password    = document.getElementById("password").value
            const confirmpass = document.getElementById("confirmpass").value

              const records   = JSON.parse(localStorage.getItem("arr"));

            if (fname != "" && lname != "" && email != "" && password != "" && confirmpass != "") {

                let arr = localStorage.getItem("arr")
                        ? JSON.parse(localStorage.getItem("arr")) :
                        [];


                let user_data = {
                    "fname": fname,
                    "lastname": lname,
                    "email": email,
                    "password": password,
                    "confirmpass": confirmpass,
                }
                let check = true;
                if(records!= null){
                    for( let i=0; i< records.length; i++){
                        if(records[i].email ==email ){
                            check = false;
                            break;
                        }
                    }
                }


          if(check){
            if (password === confirmpass) {
                  
                arr.push(user_data)
                    localStorage.setItem("arr", JSON.stringify(arr))
                    alert("Successfully logged in")
                    window.location.href = "login.html"

                }
                else {
                    alert("password mismatch")
                }

          }
          else{
            alert("Already have an account")

          }
               
        }
        else{
            alert ("fill this data")
        }}
        
      


    </script>
</body>

</html>